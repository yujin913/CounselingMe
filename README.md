# 1. 프로젝트 소개
- 프로젝트 이름: Counseling Me
- 프로젝트 내용: 효율적인 상담관리를 위한 웹 서비스

### :hourglass: 개발 기간
- 2024.05.08 - 2024.06.06

### :technologist: 인원 구성
- 최유진 (1인/개인)

<br>

# 2. 주요 기능
- 인사관리: 사용자 등록 및 상담사 관리
- 상담관리: 상담사 전용 페이지, 상담 기록 관리
- 예약관리: 상담 예약 관리, 예약 신청 페이지
- 보안: BCrypt 활용 암호화, 권한에 따른 접근 제한

<br>

# 3. 개발 환경
| Frontend    | Backend    | Database    | Environment    | Deployment    |
|:-----------:|:---------:|:-----------:|:-------------:|:------------:|
| JSP         | JSP       | H2          | Eclipse IDE   | -            |
<br>

# 4. 비즈니스 흐름도
![Image](https://github.com/user-attachments/assets/9efbcca9-92a5-4a84-8f8b-977aad129bf5)

<br>

# 5. ERD
![Image](https://github.com/user-attachments/assets/4e26a1d3-4b1c-40b9-9e30-75104ebe6ff2)

<br>

# 6. 트러블 슈팅
<details>
  <summary>📌 1. 이미지 저장</summary>

  - 초기에는 이미지 관리의 편의성과 업로드 및 데이터베이스 구조의 단순함을 위해 원본 이미지를 데이터베이스에 BLOB(Binary Large Object) 형태로 저장하려고 했다.
  - 업로드 시 **인코딩 문제**, **용량 제한** 및 **데이터베이스 자료형 문제**가 발생하여, 이미지 저장 방식에 문제가 있었다.

  - 구글링과 생성형 AI를 통해 `MultiPart` 클래스의 개념을 확인하였고, Spring에서는 `MultipartFile`을 사용하지만, JSP 프로젝트이므로 `@MultipartConfig` 애너테이션을 활용해 파일 업로드를 구현하였다.
  - `@MultipartConfig` 애너테이션을 적용하여 이미지의 용량 제한을 설정하고, 데이터베이스의 이미지 자료형을 BLOB에서 `String`으로 변경하여 파일 경로 또는 URL을 저장하도록 수정하였다.

  - 인코딩 및 용량 관련 문제를 해결하여 안정적으로 이미지 업로드를 처리할 수 있게 되었다.
  - 데이터베이스 구조가 간소화되어 이미지 관리가 편리해졌으며, 시스템의 성능과 유지보수성이 향상되었다.


</details>

<details>
  <summary>📌 2. 권한 부여</summary>

  - 프로젝트는 관리자, 상담사, 피상담사(일반 사용자) 등 3가지 권한을 가지도록 설계되었다.

  - 상담사의 인증 및 검증 절차가 불분명하여, 효과적인 권한 부여 방식을 결정해야 하는 상황이었다.
  - 향후 상담 서비스, 강의 서비스, 인사 관리 웹/애플리케이션 등에서 역할에 따른 기능 차별화가 필수적이었다.

  - 일반적으로 사용되는 인증 방식(수동 검토 vs. 외부 API)을 조사하여 비교 분석하였다.
  - 인증 방식은 일반적으로 **수동 검토 방식**과 정부 또는 기관 API를 통해 자동 인증되는 **외부 API 방식**이 있었는데, 본 프로젝트에는 **수동 검토 방식**을 채택했다.
  - 관리자는 모든 권한을 부여하도록 설정하고, 상담사 권한은 등록 후 관리자의 승인 절차를 거치도록 `if-else` 문을 통해 구현하였다.
  - 승인 시 데이터베이스의 `is_couselor` 컬럼 값을 업데이트하여 상담사 권한을 부여하도록 처리하였다.

  - 명확한 역할 분리가 이루어져, 관리자는 모든 기능에 접근 가능하고, 상담사는 승인 후 예약 대상에 포함되며, 일반 사용자는 기본 권한만 부여되었다.
  - 시스템의 확장성을 고려한 역할 기반 인증 구조가 마련되어, 향후 다른 서비스 개발 시에도 일관된 방식으로 권한을 관리할 수 있게 되었다.
</details>
<br>

# 7. 회고

- `비즈니스 흐름도`를 보면 마이페이지를 기점으로 상당히 많은 로직들이 **의존**하고 있는 것이 한 눈에 들어온다. 꼭 필요한 의존성만을 부여하며 **도메인**을 체계적으로 나눌 필요가 있다.

- `Model-View-Controller` 패턴을 최대한 지키려 노력했고, 이 과정에서 `Thymeleaf`와 같은 **뷰 템플릿**의 소중함을 일깨워주었다.

- 데이터베이스 연동 과정에서 **쿼리문**을 모두 작성해야하니 오타가 많이 났고, `PreparedStatement`로 계속 연결해주어야 하는 번거로움도 있었다. `Spring`이 세상에 나오기 전까지 얼마나 자바 개발자가 고생했는지 알 수 있는 프로젝트였다.
  
- 하지만, 원시적인 코드를 작성하며 **자바의 서블릿과 톰캣 서버**의 동작 과정도 직접 확인했고, `JPA`의 기본 구조를 파악하여 이후 `Spring Data JPA` 등을 활용할 때 도움이 되지 않을까 싶다.
