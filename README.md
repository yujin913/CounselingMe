# 1. 프로젝트 소개
- 프로젝트 이름: Counseling Me
- 프로젝트 내용: 효율적인 상담관리를 위한 웹 서비스

### :hourglass: 개발 기간
- 2024.05.08 - 2024.06.06

### :technologist: 인원 구성
- 최유진 (1인/개인)

<br>

# 2. 주요 기능
- 인사관리: 사용자 등록 및 상담사 관리
- 상담관리: 상담사 전용 페이지, 상담 기록 관리
- 예약관리: 상담 예약 관리, 예약 신청 페이지
- 보안: BCrypt 활용 암호화, 권한에 따른 접근 제한

<br>

# 3. 개발 환경
| Frontend    | Backend    | Database    | Environment    | Deployment    |
|:-----------:|:---------:|:-----------:|:-------------:|:------------:|
| JSP         | JSP       | H2          | Eclipse IDE   | -            |
<br>

# 4. 비즈니스 흐름도
![Image](https://github.com/user-attachments/assets/9efbcca9-92a5-4a84-8f8b-977aad129bf5)

<br>

# 5. ERD
![Image](https://github.com/user-attachments/assets/4e26a1d3-4b1c-40b9-9e30-75104ebe6ff2)

<br>

# 6. 트러블 슈팅
<details>
  <summary>📌 1. 이미지 저장</summary>

  - 처음에 이미지 관리의 편의성과 업로드와 데이터베이스 구조의 간단함을 위해 데이터베이스에 원본 이미지를 **BLOB(Binary Large Object)** 형태로 저장하려고 했다.
  - 하지만, 업로드 시에 **인코딩과 용량 문제, 데이터베이스 자료형 문제**가 발생했다.
  - 이를 해결하기 위해 **구글링과 생성형 AI**를 통해 `MultiPart` 클래스를 확인하였고, Spring에서는 `MultipartFile`을 사용하지만 **JSP 프로젝트**이기에 `@MultipartConfig` 애너테이션을 통해 구현하였다.
  - `@MultipartConfig` 애너테이션을 통해 **이미지의 용량 제한을 두고**, 데이터베이스 이미지 자료형을 `String`으로 변경하여 해결할 수 있었다.

</details>
<details>
  <summary>📌 2. 권한 부여</summary>

  - 관리자, 상담사, 피상담사(일반 사용자)의 3가지 권한이 있도록 설계했다.
  - 어떤 인증과정을 거쳐 **상담사를 검증**해야 하는지 과정을 몰랐다. 추가로 앞으로 상담 서비스, 강의 서비스나 인사 관리 웹/애플리케이션을 개발할 때 권한에 따른 기능 차이는 필수요소라고 생각되어 일반적으로 어떤 방식을 사용하는지 검색했다.
  - 인증 방식은 일반적으로 **수동 검토 방식**과 정부 또는 기관 API를 통해 자동 인증되는 **외부 API 방식**이 있었는데, 본 프로젝트에는 **수동 검토 방식**을 채택했다.
  - 관리자는 모든 권한을 허용하도록 했고, `if-else`문으로 권한을 확인하도록 했다.
  - 상담사는 일반 사용자와는 다르게 예약 대상으로 선택되어야 하기에 상담사 등록을 마친 후, 관리자의 승인을 통하여 데이터베이스의 `is_couselor` 컬럼 값을 통해 권한을 부여했다.

</details>
<br>

# 7. 회고
- `비즈니스 흐름도`를 보면 마이페이지를 기점으로 상당히 많은 로직들이 **의존**하고 있는 것이 한 눈에 들어온다. 꼭 필요한 의존성만을 부여하며 **도메인**을 체계적으로 나눌 필요가 있다.
- `Model-View-Controller` 패턴을 최대한 지키려 노력했고, 이 과정에서 `Thymeleaf`와 같은 **뷰 템플릿**의 소중함을 일깨워주었다.
- 데이터베이스 연동 과정에서 **쿼리문**을 모두 작성해야하니 오타가 많이 났고, `PreparedStatement`로 계속 연결해주어야 하는 번거로움도 있었다. `Spring`이 세상에 나오기 전까지 얼마나 자바 개발자가 고생했는지 알 수 있는 프로젝트였다.
- 하지만, 원시적인 코드를 작성하며 **자바의 서블릿과 톰캣 서버**의 동작 과정도 직접 확인했고, `JPA`의 기본 구조를 파악하여 이후 `Spring Data JPA` 등을 활용할 때 도움이 되지 않을까 싶다.
